<local:ArticleViewerPageBase
    x:Class="_1507_UWP.Pages.ArticleViewerPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="using:WikiViewer.Shared.Uwp.Pages"
    xmlns:controls="using:_1507_UWP.Controls"
    Background="Transparent">

    <Page.Resources>
        <Storyboard x:Name="FadeInAnimation">
            <DoubleAnimation Storyboard.TargetName="LoadingOverlay"
                             Storyboard.TargetProperty="Opacity"
                             From="0" To="1"
                             Duration="0:0:0.250"
                             EnableDependentAnimation="True"/>
        </Storyboard>
        <Storyboard x:Name="FadeOutAnimation">
            <DoubleAnimation Storyboard.TargetName="LoadingOverlay"
                             Storyboard.TargetProperty="Opacity"
                             From="1" To="0"
                             Duration="0:0:0.350"
                             EnableDependentAnimation="True"/>
        </Storyboard>
    </Page.Resources>

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="*" />
            <RowDefinition Height="Auto" />
        </Grid.RowDefinitions>

        <WebView x:Name="ArticleDisplayWebView"
                 Grid.Row="0"
                 ScrollViewer.VerticalScrollBarVisibility="Visible"
                 DefaultBackgroundColor="Transparent" />

        <CommandBar Grid.Row="1"
                    VerticalAlignment="Bottom"
                    HorizontalAlignment="Stretch">
            <AppBarButton x:Name="EditButton"
                          Icon="Edit"
                          Label="Edit"
                          Click="EditButton_Click"
                          Visibility="Collapsed"/>
            <AppBarButton x:Name="FavoriteButton"
                          Icon="Favorite"
                          Label="Add to Favourites"
                          Click="FavoriteButton_Click"/>
            <AppBarButton x:Name="ShareButton"
                          Icon="ReShare"
                          Label="Share"
                          Click="ShareButton_Click"/>
        </CommandBar>

        <Grid x:Name="LoadingOverlay"
              Grid.RowSpan="2"
              Opacity="0"
              IsHitTestVisible="False"
              Background="{ThemeResource SystemControlBackgroundChromeMediumLowBrush}">
            <StackPanel HorizontalAlignment="Center" VerticalAlignment="Center">
                <ProgressRing IsActive="True" Width="60" Height="60"/>
                <TextBlock x:Name="LoadingText"
                           Text="Loading..."
                           HorizontalAlignment="Center"
                           Foreground="{ThemeResource SystemControlForegroundBaseHighBrush}"/>
                <TextBlock x:Name="LastUpdatedText"
                           Style="{ThemeResource BodyTextBlockStyle}"
                           Opacity="0.7"
                           Visibility="Collapsed"
                           Margin="0,4,0,0"
                           Foreground="{ThemeResource SystemControlForegroundBaseHighBrush}"/>
            </StackPanel>
        </Grid>

        <Grid x:Name="VerificationPanel"
              Grid.RowSpan="2"
              Background="{ThemeResource ApplicationPageBackgroundThemeBrush}"
              Visibility="Collapsed">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="*"/>
            </Grid.RowDefinitions>
            <StackPanel Margin="12">
                <TextBlock Text="Please complete the security check"
                           Style="{ThemeResource TitleTextBlockStyle}"/>
                <TextBlock Text="The app will continue automatically once you finish."
                           Style="{ThemeResource BodyTextBlockStyle}"
                           TextWrapping="Wrap"/>
            </StackPanel>
            <WebView x:Name="VerificationWebView"
                     Grid.Row="1"
                     ScrollViewer.VerticalScrollBarVisibility="Visible"
                     DefaultBackgroundColor="Transparent"/>
        </Grid>
    </Grid>
</local:ArticleViewerPageBase>