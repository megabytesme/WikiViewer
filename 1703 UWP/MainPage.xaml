<local:MainPageBase
    x:Class="_1703_UWP.Pages.MainPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="using:WikiViewer.Shared.Uwp.Pages"
    xmlns:controls="using:_1703_UWP.Controls"
    xmlns:viewModels="using:_1703_UWP.ViewModels"
    xmlns:converters="using:_1703_UWP.Converters">

    <Page.Resources>
        <converters:BoolToExpandCollapseSymbolConverter x:Key="ExpandCollapseConverter" />
    </Page.Resources>

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="48"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <Grid x:Name="AppTitleBar" Grid.Row="0">
            <Grid.ColumnDefinitions>
                <ColumnDefinition x:Name="TitleBarLeftPaddingColumn" Width="0"/>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition x:Name="TitleBarRightPaddingColumn" Width="0"/>
            </Grid.ColumnDefinitions>
            <controls:PageHeader x:Name="PageHeaderControl" Grid.Column="1" HamburgerClick="PageHeader_HamburgerClick"/>
        </Grid>

        <SplitView x:Name="NavSplitView" Grid.Row="1" DisplayMode="CompactInline" IsPaneOpen="False" OpenPaneLength="250" CompactPaneLength="48" PaneBackground="{ThemeResource SystemControlBackgroundChromeMediumLowBrush}">
            <VisualStateManager.VisualStateGroups>
                <VisualStateGroup x:Name="WindowStates">
                    <VisualState x:Name="WideState">
                        <VisualState.StateTriggers>
                            <AdaptiveTrigger MinWindowWidth="1024" />
                        </VisualState.StateTriggers>
                        <VisualState.Setters>
                            <Setter Target="NavSplitView.DisplayMode" Value="Inline"/>
                            <Setter Target="NavSplitView.IsPaneOpen" Value="True"/>
                        </VisualState.Setters>
                    </VisualState>
                    <VisualState x:Name="NormalState">
                        <VisualState.StateTriggers>
                            <AdaptiveTrigger MinWindowWidth="640" />
                        </VisualState.StateTriggers>
                        <VisualState.Setters>
                            <Setter Target="NavSplitView.DisplayMode" Value="CompactInline"/>
                            <Setter Target="NavSplitView.IsPaneOpen" Value="False"/>
                        </VisualState.Setters>
                    </VisualState>
                    <VisualState x:Name="NarrowState">
                        <VisualState.StateTriggers>
                            <AdaptiveTrigger MinWindowWidth="0" />
                        </VisualState.StateTriggers>
                        <VisualState.Setters>
                            <Setter Target="NavSplitView.DisplayMode" Value="Overlay"/>
                            <Setter Target="NavSplitView.IsPaneOpen" Value="False"/>
                        </VisualState.Setters>
                    </VisualState>
                </VisualStateGroup>
            </VisualStateManager.VisualStateGroups>

            <SplitView.Pane>
                <Grid>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="*"/>
                        <RowDefinition Height="Auto"/>
                    </Grid.RowDefinitions>
                    <ListView x:Name="NavListView"
                              SelectionMode="None"
                              IsItemClickEnabled="False"
                              HorizontalAlignment="Stretch"
                              Margin="0" Padding="0"
                              ScrollViewer.HorizontalScrollBarVisibility="Disabled">
                        <ListView.ItemContainerStyle>
                            <Style TargetType="ListViewItem">
                                <Setter Property="HorizontalContentAlignment" Value="Stretch"/>
                                <Setter Property="Padding" Value="0"/>
                            </Style>
                        </ListView.ItemContainerStyle>


                        <ListView.ItemTemplate>
                            <DataTemplate x:DataType="viewModels:WikiNavItemViewModel">
                                <StackPanel HorizontalAlignment="Stretch">
                                    <Grid Height="44" HorizontalAlignment="Stretch">
                                        <Button Click="MainWikiButton_Click"
                                                Background="Transparent"
                                                BorderThickness="0"
                                                Padding="0,0,48,0"
                                                Height="44"
                                                HorizontalAlignment="Stretch"
                                                HorizontalContentAlignment="Left">
                                            <StackPanel Orientation="Horizontal" VerticalAlignment="Center">
                                                <BitmapIcon UriSource="{x:Bind Wiki.IconUrl, Mode=OneWay}"
                                                            Width="18" Height="18"
                                                            VerticalAlignment="Center"
                                                            Margin="13,0,13,0"/>
                                                <TextBlock Text="{x:Bind Wiki.Name}"
                                                            VerticalAlignment="Center"/>
                                            </StackPanel>
                                        </Button>

                                        <Button Click="ExpanderButton_Click"
                                                Background="Transparent"
                                                BorderThickness="0"
                                                Padding="0"
                                                Width="48" Height="44"
                                                HorizontalAlignment="Right"
                                                HorizontalContentAlignment="Center"
                                                VerticalContentAlignment="Center">
                                            <FontIcon FontFamily="Segoe MDL2 Assets"
                          Glyph="{x:Bind IsExpanded, Mode=OneWay, Converter={StaticResource ExpandCollapseConverter}}"/>
                                        </Button>
                                    </Grid>

                                    <StackPanel Visibility="{x:Bind IsExpanded, Mode=OneWay, Converter={StaticResource GlobalBoolToVisibility}}">
                                        <Button Tag="home"
                                                Click="SubItemButton_Click"
                                                Background="Transparent"
                                                BorderThickness="0"
                                                Padding="0"
                                                Height="44"
                                                HorizontalAlignment="Stretch"
                                                HorizontalContentAlignment="Left">
                                            <StackPanel Orientation="Horizontal">
                                                <SymbolIcon Symbol="Home" Margin="12,0,12,0"/>
                                                <TextBlock Text="Home Page"/>
                                            </StackPanel>
                                        </Button>
                                        <Button Tag="random"
                                                Click="SubItemButton_Click"
                                                Background="Transparent"
                                                BorderThickness="0"
                                                Padding="0"
                                                Height="44"
                                                HorizontalAlignment="Stretch"
                                                HorizontalContentAlignment="Left">
                                            <StackPanel Orientation="Horizontal">
                                                <SymbolIcon Symbol="Shuffle" Margin="12,0,12,0"/>
                                                <TextBlock Text="Random Article"/>
                                            </StackPanel>
                                        </Button>
                                    </StackPanel>
                                </StackPanel>
                            </DataTemplate>
                        </ListView.ItemTemplate>
                    </ListView>

                    <ListView x:Name="NavFooterListView"
                              Grid.Row="1"
                              IsItemClickEnabled="True"
                              ItemClick="NavListView_ItemClick"
                              SelectionMode="Single"
                              SelectionChanged="NavListView_SelectionChanged">
                        <ListView.ItemContainerStyle>
                            <Style TargetType="ListViewItem">
                                <Setter Property="HorizontalContentAlignment" Value="Stretch"/>
                                <Setter Property="Padding" Value="0"/>
                            </Style>
                        </ListView.ItemContainerStyle>
                        <ListViewItem Tag="favourites">
                            <StackPanel Orientation="Horizontal" VerticalAlignment="Center">
                                <SymbolIcon Symbol="Favorite" Margin="12,0,12,0"/>
                                <TextBlock Text="Favourites" VerticalAlignment="Center"/>
                            </StackPanel>
                        </ListViewItem>
                        <ListViewItem Tag="accounts">
                            <StackPanel Orientation="Horizontal" VerticalAlignment="Center">
                                <SymbolIcon Symbol="Contact" Margin="12,0,12,0"/>
                                <TextBlock Text="Profiles" VerticalAlignment="Center"/>
                            </StackPanel>
                        </ListViewItem>
                        <ListViewItem Tag="settings">
                            <StackPanel Orientation="Horizontal" VerticalAlignment="Center">
                                <SymbolIcon Symbol="Setting" Margin="12,0,12,0"/>
                                <TextBlock Text="Settings" VerticalAlignment="Center"/>
                            </StackPanel>
                        </ListViewItem>
                    </ListView>
                </Grid>
            </SplitView.Pane>

            <SplitView.Content>
                <Grid>
                    <Frame x:Name="PageContentFrame" Navigated="ContentFrame_Navigated"/>
                    <Border x:Name="ConnectionInfoBar" BorderThickness="1" CornerRadius="4" Visibility="Collapsed" Margin="12" VerticalAlignment="Top" Canvas.ZIndex="5">
                        <StackPanel Padding="12">
                            <TextBlock x:Name="InfoBarTitle" Text="Connection Issue" Style="{ThemeResource BaseTextBlockStyle}" FontWeight="Bold" Foreground="White"/>
                            <TextBlock x:Name="InfoBarMessage" Text="Message" Style="{ThemeResource BodyTextBlockStyle}" TextWrapping="Wrap" Foreground="White"/>
                            <Button x:Name="InfoBarButton" Content="Action" Click="InfoBarButton_Click" Visibility="Collapsed" Background="White" Foreground="Black"/>
                        </StackPanel>
                    </Border>
                </Grid>
            </SplitView.Content>
        </SplitView>
        <Grid x:Name="WorkerWebViewHost" Visibility="Collapsed"/>
    </Grid>
</local:MainPageBase>