<local:MainPageBase
    x:Class="_1809_UWP.Pages.MainPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:muxc="using:Microsoft.UI.Xaml.Controls"
    xmlns:local="using:WikiViewer.Shared.Uwp.Pages"
    muxc:BackdropMaterial.ApplyToRootOrPageBackground="True">
    <Grid>
        <VisualStateManager.VisualStateGroups>
            <VisualStateGroup x:Name="WindowStates">
                <VisualState x:Name="WideState">
                    <VisualState.StateTriggers>
                        <AdaptiveTrigger MinWindowWidth="1008" />
                    </VisualState.StateTriggers>
                    <VisualState.Setters>
                        <Setter Target="NavView.PaneDisplayMode" Value="Left"/>
                    </VisualState.Setters>
                </VisualState>
            </VisualStateGroup>
        </VisualStateManager.VisualStateGroups>
        <Grid.RowDefinitions>
            <RowDefinition Height="32"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>
        <Grid x:Name="AppTitleBar" Background="Transparent" Grid.Row="0">
            <Grid.ColumnDefinitions>
                <ColumnDefinition x:Name="TitleBarLeftPaddingColumn" Width="0"/>
                <ColumnDefinition/>
                <ColumnDefinition x:Name="TitleBarRightPaddingColumn" Width="0"/>
            </Grid.ColumnDefinitions>
            <TextBlock Text="WikiViewer" VerticalAlignment="Center" HorizontalAlignment="Left" Margin="16,0,0,0" Grid.Column="1" Style="{StaticResource CaptionTextBlockStyle}"/>
        </Grid>
        <muxc:NavigationView Grid.Row="1" x:Name="NavView" PaneDisplayMode="LeftCompact" IsSettingsVisible="True" IsBackButtonVisible="Collapsed" IsBackEnabled="False" ItemInvoked="NavView_ItemInvoked" Loaded="NavView_Loaded" BackRequested="NavView_BackRequested" IsTitleBarAutoPaddingEnabled="True">

            <muxc:NavigationView.AutoSuggestBox>
                <AutoSuggestBox x:Name="NavSearchBox" QueryIcon="Find" PlaceholderText="Search..." 
                    QuerySubmitted="SearchBox_QuerySubmitted" TextChanged="SearchBox_TextChanged"
                    UpdateTextOnSelect="False" TextMemberPath="Title">
                    <AutoSuggestBox.ItemTemplate>
                        <DataTemplate xmlns:vm="using:WikiViewer.Shared.Uwp.ViewModels" x:DataType="vm:SearchSuggestionViewModel">
                            <StackPanel Orientation="Horizontal" Spacing="8" Margin="0,4">
                                <BitmapIcon UriSource="{x:Bind IconUrl}" ShowAsMonochrome="False" Width="16" Height="16"/>
                                <StackPanel>
                                    <TextBlock Text="{x:Bind Title}"/>
                                    <TextBlock Text="{x:Bind WikiName}" Opacity="0.7" Style="{StaticResource CaptionTextBlockStyle}"/>
                                </StackPanel>
                            </StackPanel>
                        </DataTemplate>
                    </AutoSuggestBox.ItemTemplate>
                </AutoSuggestBox>
            </muxc:NavigationView.AutoSuggestBox>

            <Grid>
                <Frame x:Name="PageContentFrame" Navigated="ContentFrame_Navigated"/>
                <muxc:InfoBar x:Name="ConnectionInfoBar" Grid.Row="0" Title="Connection Issue" Severity="Warning" IsOpen="False" IsClosable="True" Margin="12,12,12,0" VerticalAlignment="Top">
                    <muxc:InfoBar.ActionButton>
                        <Button x:Name="InfoBarButton" Content="Action" Click="InfoBarButton_Click" Visibility="Collapsed"/>
                    </muxc:InfoBar.ActionButton>
                </muxc:InfoBar>
            </Grid>
        </muxc:NavigationView>
        <Grid x:Name="WorkerWebViewHost" Visibility="Collapsed"/>
    </Grid>
</local:MainPageBase>