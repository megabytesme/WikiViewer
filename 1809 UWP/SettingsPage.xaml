<local:SettingsPageBase
    x:Class="_1809_UWP.Pages.SettingsPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:muxc="using:Microsoft.UI.Xaml.Controls"
    xmlns:local="using:WikiViewer.Shared.Uwp.Pages"
    xmlns:models="using:WikiViewer.Core.Models"
    Background="Transparent">

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <Grid Style="{StaticResource PageTitleBarGridStyle}">
            <TextBlock Text="Settings" Style="{StaticResource PageTitleBarTextStyle}"/>
        </Grid>

        <ScrollViewer Grid.Row="1" VerticalScrollBarVisibility="Auto">
            <StackPanel MaxWidth="800" Spacing="24" HorizontalAlignment="Center" Margin="24">

                <Border Background="{ThemeResource CardBackgroundFillColorDefaultBrush}" BorderBrush="{ThemeResource CardStrokeColorDefaultBrush}" BorderThickness="1" CornerRadius="8" Padding="16">
                    <StackPanel Spacing="12">
                        <TextBlock Text="Manage Wikis" Style="{ThemeResource SubtitleTextBlockStyle}"/>
                        <TextBlock Text="Add, remove, or edit the MediaWiki sites this app connects to." Opacity="0.7"/>
                        <ListView x:Name="WikiListView" IsItemClickEnabled="True" ItemClick="WikiListView_ItemClick" SelectionMode="None">
                            <ListView.ItemTemplate>
                                <DataTemplate x:DataType="models:WikiInstance">
                                    <StackPanel Orientation="Horizontal" Spacing="12" Padding="8,4">
                                        <SymbolIcon Symbol="Globe"/>
                                        <TextBlock Text="{x:Bind Name}" VerticalAlignment="Center"/>
                                    </StackPanel>
                                </DataTemplate>
                            </ListView.ItemTemplate>
                        </ListView>
                        <Button Content="Add a New Wiki" HorizontalAlignment="Stretch" Click="AddWikiButton_Click"/>
                    </StackPanel>
                </Border>

                <Border Background="{ThemeResource CardBackgroundFillColorDefaultBrush}" BorderBrush="{ThemeResource CardStrokeColorDefaultBrush}" BorderThickness="1" CornerRadius="8" Padding="16">
                    <StackPanel Spacing="12">
                        <TextBlock Text="Connection" Style="{ThemeResource SubtitleTextBlockStyle}"/>
                        <Grid Margin="0,12,0,0">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="Auto"/>
                            </Grid.ColumnDefinitions>
                            <Slider x:Name="ConcurrentDownloadsSlider" Header="Maximum concurrent downloads per page" StepFrequency="1" ValueChanged="ConcurrentDownloadsSlider_ValueChanged" VerticalAlignment="Center">
                                <Slider.Minimum>
                                    <x:Double>1</x:Double>
                                </Slider.Minimum>
                                <Slider.Maximum>
                                    <x:Double>16</x:Double>
                                </Slider.Maximum>
                            </Slider>
                            <TextBlock x:Name="ConcurrentDownloadsValueText" Grid.Column="1" Text="4" Margin="12,0,0,0" VerticalAlignment="Center" Style="{ThemeResource BodyStrongTextBlockStyle}"/>
                        </Grid>
                    </StackPanel>
                </Border>

                <Border Background="{ThemeResource CardBackgroundFillColorDefaultBrush}" BorderBrush="{ThemeResource CardStrokeColorDefaultBrush}" BorderThickness="1" CornerRadius="8" Padding="16">
                    <StackPanel Spacing="12">
                        <TextBlock Text="Storage" Style="{ThemeResource SubtitleTextBlockStyle}"/>
                        <Grid VerticalAlignment="Center">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="Auto"/>
                            </Grid.ColumnDefinitions>
                            <TextBlock Text="Enable Offline Reading" VerticalAlignment="Center" Style="{ThemeResource BodyStrongTextBlockStyle}"/>
                            <ToggleSwitch x:Name="CachingToggle" Toggled="CachingToggle_Toggled" VerticalAlignment="Center" HorizontalAlignment="Right"/>
                        </Grid>
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="Auto"/>
                            </Grid.ColumnDefinitions>
                            <StackPanel Grid.Column="0" VerticalAlignment="Center">
                                <TextBlock x:Name="CacheSizeText" Text="Calculating..." Style="{ThemeResource BodyTextBlockStyle}" Opacity="0.7"/>
                            </StackPanel>
                            <Button x:Name="ClearCacheButton" Grid.Column="1" Content="Clear Cache" Click="ClearCacheButton_Click" VerticalAlignment="Center"/>
                        </Grid>
                    </StackPanel>
                </Border>

                <Border Background="{ThemeResource CardBackgroundFillColorDefaultBrush}" BorderBrush="{ThemeResource CardStrokeColorDefaultBrush}" BorderThickness="1" CornerRadius="8" Padding="16">
                    <StackPanel Spacing="12">
                        <TextBlock Text="About" Style="{ThemeResource SubtitleTextBlockStyle}"/>
                        <StackPanel Orientation="Horizontal" HorizontalAlignment="Left" Spacing="12">
                            <Button Content="About This App" Click="AboutButton_Click"/>
                            <Button Content="Disclaimer" Click="DisclaimerButton_Click"/>
                        </StackPanel>
                    </StackPanel>
                </Border>
            </StackPanel>
        </ScrollViewer>
    </Grid>
</local:SettingsPageBase>