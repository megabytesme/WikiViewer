<local:SettingsPageBase
    x:Class="_1809_UWP.Pages.SettingsPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:muxc="using:Microsoft.UI.Xaml.Controls"
    xmlns:local="using:WikiViewer.Shared.Uwp.Pages"
    xmlns:models="using:WikiViewer.Core.Models"
    Background="Transparent">

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <Grid Style="{StaticResource PageTitleBarGridStyle}" Background="{ThemeResource PageTitleBarAcrylicBrush}">
            <TextBlock Text="Settings" Style="{StaticResource PageTitleBarTextStyle}"/>
        </Grid>

        <ScrollViewer Grid.Row="1" VerticalScrollBarVisibility="Auto">
            <StackPanel MaxWidth="800" Spacing="24" HorizontalAlignment="Center" Margin="24">

                <Border Background="{ThemeResource CardBackgroundFillColorDefaultBrush}" BorderBrush="{ThemeResource CardStrokeColorDefaultBrush}" BorderThickness="1" CornerRadius="8" Padding="16">
                    <StackPanel Spacing="12">
                        <TextBlock Text="Manage Wikis" Style="{ThemeResource SubtitleTextBlockStyle}"/>
                        <TextBlock Text="Add, remove, or edit the MediaWiki sites this app connects to." Opacity="0.7" TextWrapping="WrapWholeWords"/>
                        <ListView x:Name="WikiListView" IsItemClickEnabled="True" ItemClick="WikiListView_ItemClick" SelectionMode="None">
                            <ListView.ItemTemplate>
                                <DataTemplate x:DataType="models:WikiInstance">
                                    <StackPanel Orientation="Horizontal" Spacing="12" Padding="8,4">
                                        <BitmapIcon UriSource="{x:Bind IconUrl, Mode=OneWay}"
                                                    Width="24" Height="24"
                                                    ShowAsMonochrome="False"/>
                                        <TextBlock Text="{x:Bind Name}" VerticalAlignment="Center"/>
                                    </StackPanel>
                                </DataTemplate>
                            </ListView.ItemTemplate>
                        </ListView>
                        <Button Content="Add a New Wiki" HorizontalAlignment="Stretch" Click="AddWikiButton_Click"/>
                    </StackPanel>
                </Border>

                <Border Background="{ThemeResource CardBackgroundFillColorDefaultBrush}" BorderBrush="{ThemeResource CardStrokeColorDefaultBrush}" BorderThickness="1" CornerRadius="8" Padding="16">
                    <StackPanel Spacing="12">
                        <TextBlock Text="Connection" Style="{ThemeResource SubtitleTextBlockStyle}"/>
                        <ComboBox x:Name="DefaultConnectionMethodComboBox"
                                  Header="Default connection method for new wikis"
                                  SelectionChanged="DefaultConnectionMethodComboBox_SelectionChanged"
                                  Margin="0,12,0,0"/>
                        <ComboBox x:Name="ConcurrencyComboBox"
                                  Header="Concurrent downloads per page"
                                  SelectionChanged="ConcurrencyComboBox_SelectionChanged"
                                  Margin="0,12,0,0"/>
                        <TextBlock x:Name="ConcurrencyDescriptionText"
                                   Style="{ThemeResource CaptionTextBlockStyle}"
                                   TextWrapping="Wrap"
                                   Opacity="0.7"/>
                    </StackPanel>
                </Border>

                <Border Background="{ThemeResource CardBackgroundFillColorDefaultBrush}" BorderBrush="{ThemeResource CardStrokeColorDefaultBrush}" BorderThickness="1" CornerRadius="8" Padding="16">
                    <StackPanel Spacing="12">
                        <TextBlock Text="Storage" Style="{ThemeResource SubtitleTextBlockStyle}"/>
                        <Grid VerticalAlignment="Center">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="Auto"/>
                            </Grid.ColumnDefinitions>
                            <TextBlock Text="Enable Offline Reading" VerticalAlignment="Center" Style="{ThemeResource BodyStrongTextBlockStyle}"/>
                            <ToggleSwitch x:Name="CachingToggle" Toggled="CachingToggle_Toggled" VerticalAlignment="Center" HorizontalAlignment="Right"/>
                        </Grid>
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="Auto"/>
                            </Grid.ColumnDefinitions>
                            <StackPanel Grid.Column="0" VerticalAlignment="Center">
                                <TextBlock x:Name="CacheSizeText" Text="Calculating..." Style="{ThemeResource BodyTextBlockStyle}" Opacity="0.7"/>
                            </StackPanel>
                            <Button x:Name="ClearCacheButton" Grid.Column="1" Content="Clear Cache" Click="ClearCacheButton_Click" VerticalAlignment="Center"/>
                        </Grid>
                    </StackPanel>
                </Border>

                <Border Background="{ThemeResource CardBackgroundFillColorDefaultBrush}"
                        BorderBrush="{ThemeResource CardStrokeColorDefaultBrush}"
                        BorderThickness="1"
                        CornerRadius="8"
                        Padding="16">
                    <StackPanel Spacing="12">
                        <TextBlock Text="Appearance" Style="{ThemeResource SubtitleTextBlockStyle}"/>
                        <TextBlock Text="Customize the look and feel of articles. After editing, use the refresh button on an article page to see your changes."
                   TextWrapping="Wrap"
                   Opacity="0.7"/>
                        <StackPanel Orientation="Horizontal"
                                    HorizontalAlignment="Left"
                                    Spacing="12"
                                    Margin="0,12,0,0">
                            <Button Content="Edit Custom Theme (CSS)" Click="EditThemeButton_Click"/>
                            <Button Content="Reset to Default (Fluent) Theme" Click="ResetThemeButton_Click"/>
                        </StackPanel>

                        <Grid Margin="0,12,0,0">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="Auto"/>
                            </Grid.ColumnDefinitions>
                            <TextBlock Grid.Column="0"
                                       Text="Enable Custom (Fluent) Theming"
                                       VerticalAlignment="Center"
                                       Style="{ThemeResource BodyStrongTextBlockStyle}"/>
                            <ToggleSwitch x:Name="EnableCustomThemingToggle"
                                          Grid.Column="1"
                                          Toggled="EnableCustomThemingToggle_Toggled"
                                          VerticalAlignment="Center"
                                          HorizontalAlignment="Right"/>
                        </Grid>
                        <StackPanel Orientation="Vertical">
                            <TextBlock Text="Enables the custom (fluent) CSS styling within articles. Turn this off if you want the standard Wiki layout."
                                       TextWrapping="Wrap"
                                       Opacity="0.7"
                                       Margin="0,-15,0,0"/>
                        </StackPanel>

                        <Grid Margin="0,12,0,0">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="Auto"/>
                            </Grid.ColumnDefinitions>
                            <TextBlock Grid.Column="0"
                       Text="Show CSS Refresh button"
                       VerticalAlignment="Center"
                       Style="{ThemeResource BodyStrongTextBlockStyle}"/>
                            <ToggleSwitch x:Name="ShowCssRefreshToggle"
                                          Grid.Column="1"
                                          Toggled="ShowCssRefreshButtonToggle_Toggled"
                                          VerticalAlignment="Center"
                                          HorizontalAlignment="Right"/>
                        </Grid>
                        <StackPanel Orientation="Vertical">
                            <TextBlock Text="Enables the refresh button on the article page to refresh the CSS styling within articles. Turn this on if you want to make live changes to the standard Wiki styling."
                                       TextWrapping="Wrap"
                                       Opacity="0.7"
                                       Margin="0,-15,0,0"/>
                        </StackPanel>
                    </StackPanel>
                </Border>

                <Border Background="{ThemeResource CardBackgroundFillColorDefaultBrush}" BorderBrush="{ThemeResource CardStrokeColorDefaultBrush}" BorderThickness="1" CornerRadius="8" Padding="16">
                    <StackPanel Spacing="12">
                        <TextBlock Text="About" Style="{ThemeResource SubtitleTextBlockStyle}"/>
                        <StackPanel Orientation="Horizontal" HorizontalAlignment="Left" Spacing="12">
                            <Button Content="About This App" Click="AboutButton_Click"/>
                            <Button Content="Disclaimer" Click="DisclaimerButton_Click"/>
                        </StackPanel>
                    </StackPanel>
                </Border>
            </StackPanel>
        </ScrollViewer>
    </Grid>
</local:SettingsPageBase>